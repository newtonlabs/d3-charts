(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),this.d3.charts.barchart=function(){"use strict";function a(a){var f,g=function(){return"undefined"!=typeof f},h=(b-e.left-e.right,c-e.top-e.bottom),i=d3.scale.ordinal().rangeRoundBands([0,b],.3),j=d3.scale.ordinal(),k=d3.scale.linear().range([h,0]),l=d3.svg.axis().scale(i).orient("bottom"),m=d3.svg.axis().scale(k).orient("left");a.each(function(a){var n=d3.keys(a[0]).filter(function(a){return"xAxis"!==a&&"yAxis"!==a&&"target"!==a&&"group"!==a});d=d3.select(this).append("svg").attr("class","barchart").attr("width",b+e.left+e.right).attr("height",c+e.top+e.bottom);var o=d.append("g").attr("transform","translate("+e.left+","+e.top+")");a.forEach(function(a){a.group=n.map(function(b){return{name:b,value:+a[b].value,color:a[b].color}})}),i.domain(a.map(function(a){return a.xAxis})),j.domain(n).rangeRoundBands([0,i.rangeBand()]);var p=d3.min(a,function(a){return d3.min(a.group,function(a){return a.value})});p>0&&(p=0);var q=d3.max(a,function(a){return d3.max(a.group,function(a){return a.value})});"undefined"!=typeof a[0].target&&(f=Number(a[0].target)),g()&&f>q&&(q=f),k.domain([p,q]);var r=h;0>p&&q>0&&(r=h*(q/(q-p)));var s=o.selectAll(".cat").data(a).enter().append("g").attr("class","g").attr("transform",function(a){return"translate("+i(a.xAxis)+",0)"});s.selectAll("rect").data(function(a){return a.group}).enter().append("rect").attr("width",j.rangeBand()).attr("x",function(a){return j(a.name)}).attr("y",function(a){return a.value<0?k(0):k(a.value)}).attr("height",function(a){return a.value<0?k(a.value+q):h-k(a.value+p)}).style("fill",function(a){return a.color}),o.append("g").attr("class","x axis").attr("transform","translate(0,"+r+")").call(l),o.append("svg:g").attr("class","y axis").call(m).selectAll("g").append("svg:foreignObject").attr("width","150px").attr("height","40px").attr("x",-160).attr("y",-20).attr("style","text-align: right;").append("xhtml:div").html(function(a){return a}),o.selectAll(".y.axis g text").remove(),o.select(".y.axis").append("text").attr("y",-20).style("text-anchor","start").text(a[0].yAxis),g()&&o.append("line").attr("class","target").attr("x1",0).attr("y1",k(f)).attr("x2",b).attr("y2",k(f))})}var b=1200,c=400,d={},e={top:50,right:20,bottom:0,left:75};return a.width=function(c){return arguments.length?(b=c,a):b},a.height=function(b){return arguments.length?(c=b,a):c},a.svg=function(){return d},a},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),d3.charts.baseBuilder=function(a,b,c){"use strict";var d,e,f,g={};return g.draw=function(){g.setupSvg(),g.setupChart(),g.setupGraphic(),c.svgArea&&g.svgArea(),c.chartArea&&g.chartArea(),c.graphicArea&&g.graphicArea(),c.testArea&&g.addTestCircles()},g.setupSvg=function(){d=d3.select(a).append("svg").attr("class",c.className).attr("width",c.width).attr("height",c.height)},g.setupChart=function(){e=d.append("g").attr("transform","translate("+g.marginLeft()+","+g.marginTop()+")")},g.chartArea=function(){e.append("rect").attr("height",g.chartHeight()).attr("width",g.chartWidth()).attr("x",0).attr("y",0).attr("stroke","steelblue").attr("fill","none").attr("stroke-width","2px")},g.setupGraphic=function(){f=d.append("g").attr("transform","translate("+g.graphicMarginLeft()+","+g.graphicMarginTop()+")")},g.svgArea=function(){d.append("rect").attr("height",c.height).attr("width",c.width).attr("x",0).attr("y",0).attr("stroke","gray").attr("fill","none").attr("stroke-width","1px")},g.graphicArea=function(){f.append("rect").attr("height",g.graphicHeight()).attr("width",g.graphicWidth()).attr("x",0).attr("y",0).attr("stroke","red").attr("fill","none").attr("stroke-width","2px")},g.addTestCircles=function(){f.selectAll("circle").data([10,20,30]).enter().append("circle").attr("cy",function(a,b){return 100*(b+1)}).attr("cx",function(a,b){return 125*(b+1)}).attr("r",function(a){return a}).attr("stroke-width","2px").attr("fill","steelblue")},g.graphicWidth=function(){return c.leftLabels?g.chartWidth()-c.margin.leftLabel:g.chartWidth()},g.graphicHeight=function(){return c.bottomLabels&&c.topLabels?g.chartHeight()-c.margin.bottomLabel-c.margin.topLabel:c.bottomLabels&&!c.topLabels?g.chartHeight()-c.margin.bottomLabel:!c.bottomLabels&&c.topLabels?g.chartHeight()-c.margin.topLabel:g.chartHeight()},g.chartWidth=function(){return c.legend?c.width-c.margin.left-c.margin.right-c.margin.legend:c.width-c.margin.left-c.margin.right},g.chartHeight=function(){return c.titleOn?c.height-c.margin.top-c.margin.bottom-c.margin.title:c.height-c.margin.top-c.margin.bottom},g.marginLeft=function(){return c.margin.left},g.marginTop=function(){return c.titleOn?c.margin.top+c.margin.title:c.margin.top},g.graphicMarginTop=function(){return c.topLabels?g.marginTop()+c.margin.topLabel:g.marginTop()},g.graphicMarginLeft=function(){return c.leftLabels?g.marginLeft()+c.margin.leftLabel:g.marginLeft()},g.legendMarginTop=function(){return g.graphicMarginTop()},g.legendMarginLeft=function(){return c.width-c.margin.legend+8},g.titleMarginLeft=function(){return c.margin.left},g.titleMarginTop=function(){return c.margin.top},g.bottomLabel=function(){return c.margin.bottomLabel},g.drawNoDataLabel=function(){var a=d3.charts.noData();a.x((c.width-300)/2).y(c.height/2-50),g.svg().call(a)},g.drawTitle=function(){var a=d3.charts.chartTitle();a.title(c.title).subTitle(c.subtitle),a.x(g.titleMarginLeft()).y(g.titleMarginTop()),g.svg().call(a)},g.svg=function(){return d},g.chart=function(){return e},g.graphic=function(){return f},g},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),d3.charts.heatmapBuilder=function(a,b,c){"use strict";var d=d3.charts.baseBuilder(a,b,c),e=(d3.charts.legend(),d3.charts.noData(),d3.scale.ordinal()),f=d3.scale.ordinal();d.draw=function(){var a=_.isEmpty(b);d.setupSvg(),d.setupChart(),d.setupGraphic(),a&&g(),h(),i(),a&&d.drawNoDataLabel(),c.legend&&l(),c.svgArea&&d.svgArea(),c.titleOn&&d.drawTitle(),c.chartArea&&d.chartArea(),c.graphicArea&&d.graphicArea()};var g=function(){b=[{data:[]}],_.each(_.range(10),function(a){_.each(_.range(10),function(c){b[0].data.push({xAxis:"Label "+c,yAxis:"Label "+a,color:"#ccc"})})}),h()},h=function(){e.domain(d3.utilities.uniqueProperties(b[0].data,"xAxis")),f.domain(d3.utilities.uniqueProperties(b[0].data,"yAxis"));var a=c.fixedColumnWidth?c.fixedColumnWidth*e.domain().length:d.graphicWidth(),g=c.fixedRowHeight?c.fixedRowHeight*f.domain().length:d.graphicHeight();e.rangeRoundBands([0,a]),f.rangeRoundBands([0,g])},i=function(){m(),k()},j=function(a){return _.isEmpty(a.color)?"none":a.color},k=function(){var a=d.svg().append("g").attr("class","heatmap-grid").attr("transform","translate("+d.graphicMarginLeft()+","+d.graphicMarginTop()+")"),g=a.selectAll("g.heatmap .square").data(b[0].data);g.enter().append("rect").attr("class","square").attr("fill",j),g.attr("x",function(a){return e(a.xAxis)}).attr("y",function(a){return f(a.yAxis)}).attr("rx",0).attr("ry",0).attr("width",e.rangeBand()).attr("height",f.rangeBand()).transition().style("fill",j),g.exit().remove();var h=a.selectAll("g.heatmap-grid .cell.value").data(b[0].data);h.enter().append("text"),h.attr("text-anchor","middle").attr("x",function(a){return e(a.xAxis)}).attr("y",function(a){return f(a.yAxis)}).attr("dy",function(){return f.rangeBand()/2+4}).attr("dx",function(){return e.rangeBand()/2}).attr("class","cell value "+c.cellFont+" "+c.cellFontColor).text(function(a){return a.value}),h.exit().remove()},l=function(){var a=d3.charts.legend().y(d.legendMarginTop()).x(d.legendMarginLeft()),b=d3.scale.ordinal().domain(_.map(c.legendData,function(a){return a.name})).range(_.map(c.legendData,function(a){return a.color}));a.y(d.legendMarginTop()).x(d.legendMarginLeft()).color(b),d.svg().datum(_.map(c.legendData,function(a){return a.name})).call(a)},m=function(){var a=d.svg().append("g").attr("class","top-nav").attr("transform","translate("+d.graphicMarginLeft()+","+d.marginTop()+")"),b=d.svg().append("g").attr("class","left-nav").attr("transform","translate("+d.marginLeft()+","+d.graphicMarginTop()+")"),g=a.selectAll("g.top-nav .text").data(e.domain());g.enter().append("svg:foreignObject").attr("class","text").append("xhtml:div").attr("class","column-label "+c.columnFont).attr("style","height:"+c.margin.topLabel+"px; width:"+e.rangeBand()+"px;").append("xhtml:div").html(function(a){return a}),g.attr("width",e.rangeBand()).attr("height",c.margin.topLabel).attr("x",function(a){return e(a)}).attr("y",function(){return f(f.domain()[0])}),g.exit().remove();var h=b.selectAll("g.left-nav .text").data(f.domain());h.enter().append("svg:foreignObject").attr("class","text").append("xhtml:div").attr("class","row-label "+c.rowFont).attr("style","height:"+f.rangeBand()+"px; width:"+168+"px;").append("xhtml:div").html(function(a){return a}),h.attr("width",168).attr("height",f.rangeBand()).attr("x",function(){return e(e.domain()[0])}).attr("y",function(a){return f(a)}),h.exit().remove()};return d},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),d3.charts.stackedBuilder=function(a,b,c){"use strict";var d,e=d3.charts.baseBuilder(a,b,c),f=50,g=d3.scale.ordinal(),h=d3.scale.linear(),i=d3.svg.axis(),j=d3.svg.axis(),k=d3.scale.ordinal(),l=d3.format(".3s"),m=d3.layout.stack(),n=d3.charts.legend();e.draw=function(){var a=_.isEmpty(b);o(),e.setupSvg(),e.setupChart(),e.setupGraphic(),a?p():q(),c.vertical?z():A(),c.titleOn&&e.drawTitle(),a&&e.drawNoDataLabel(),c.legend&&w(),c.chartArea&&e.chartArea(),c.graphicArea&&e.graphicArea()};var o=function(){c.vertical&&(c.margin.leftLabel=f)},p=function(){d=[],k.domain(["TBD"]).range(["#E6E6E6"]),g.domain(_.map(_.range(7),function(a){return"Label - "+a})),n.color(k)},q=function(){d=m(b);var a=d3.max(d,function(a){return d3.max(a,function(a){return a.y0+a.y})}),c=d3.utilities.padDomain(e.graphicWidth(),a,f);g.domain(_.map(d[0],function(a){return a.x})),h.domain([0,a+c]),k.domain(s()).range(r()),n.color(k)},r=function(){return _.reduce(d,function(a,b,c){var d=b[0].color?b[0].color:d3.utilities.stackColors[c];return a.push(d),a},[])},s=function(){return _.isEmpty(d)?["TBD"]:_.reduce(d,function(a,b){return a.push(b[0].category),a},[])},t=function(a){return _.isEmpty(a.color)?k(a.category):a.color},u=function(a){return _.isEmpty(a)?[]:_.last(a)},v=function(){return c.vertical?s().slice().reverse():s()},w=function(){n.y(e.legendMarginTop()).x(e.legendMarginLeft()),e.svg().datum(v()).call(n)},x=function(a){return 0===a%1},y=function(a){var b=a.y+a.y0;return x(b)?b>999?l(b):b:l(b)},z=function(){var a=e.graphicHeight(),b=e.graphicWidth(),c=e.graphic();g.rangeRoundBands([0,b],.2),h.range([a,0]);var f=g,m=h,n=j,o=i;o.scale(m).tickSize(b).tickPadding(3).tickFormat(l).outerTickSize([0]).orient("right"),n.scale(f).tickSize(0).orient("bottom");var p=c.append("g").attr("class","vertical y axis number").attr("transform","translate (-48,0)").call(o);p.selectAll("g").classed("gridline",!0),p.selectAll("text").attr("x",4).attr("dy",-4),c.append("g").attr("class","vertical x axis").attr("transform","translate(0,"+a+")").call(n);var q=c.selectAll(".layer").data(d).enter().append("g").attr("class","layer").style("fill",function(a){return k(a[0].category)}),r=q.selectAll("rect").data(function(a){return a}).enter().append("rect").attr("y",a).attr("x",function(a){return f(a.x)}).attr("height",0).attr("fill",t).attr("width",f.rangeBand());r.transition().delay(function(a,b){return 40*b}).attr("y",function(a){return m(a.y0+a.y)}).attr("height",function(a){return m(a.y0)-m(a.y0+a.y)}),c.selectAll(".value").data(u(d)).enter().append("text").attr("text-anchor","middle").attr("y",function(a){return m(a.y0+a.y)-4}).attr("x",function(a){return f(a.x)+f.rangeBand()/2}).attr("class","value").text(y)},A=function(){var a=e.graphicHeight(),b=e.graphicWidth(),c=e.graphic();g.rangeRoundBands([0,a],.2),h.range([0,b]),i.scale(h).tickSize(-a).tickPadding(3).tickFormat(l).outerTickSize([0]).orient("bottom"),j.scale(g).tickSize(0).tickPadding(10).orient("left"),c.append("g").attr("class","horizontal y axis").call(j);var f=c.append("g").attr("class","horizontal x axis number").attr("transform","translate(0,"+a+")").call(i);f.selectAll("g").classed("gridline",!0),f.selectAll("text").attr("x",18);var k=c.selectAll(".layer").data(d).enter().append("g").attr("class","layer"),m=k.selectAll("rect").data(function(a){return a}).enter().append("rect").attr("x",0).attr("y",function(a){return g(a.x)}).attr("width",0).attr("fill",t).attr("height",g.rangeBand());m.transition().delay(function(a,b){return 40*b}).attr("x",function(a){return h(a.y0)}).attr("width",function(a){return h(a.y)}),c.selectAll(".value").data(u(d)).enter().append("text").attr("x",function(a){return h(a.y+a.y0)+5}).attr("y",function(a){return g(a.x)+g.rangeBand()/2+4}).attr("class","value").text(y)};return e},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),d3.charts.tablechartBuilder=function(a,b,c){"use strict";var d,e,f=d3.charts.baseBuilder(a,b,c),g=d3.scale.ordinal(),h=d3.scale.ordinal(),i=d3.time.scale(),j=d3.scale.linear(),k=d3.svg.line();d3.charts.legend(),f.draw=function(){var a=_.isEmpty(b);f.setupSvg(),f.setupChart(),f.setupGraphic(),a?l():m(),n(),c.titleOn&&f.drawTitle(),a&&f.drawNoDataLabel(),c.svgArea&&f.svgArea(),c.chartArea&&f.chartArea(),c.graphicArea&&f.graphicArea()};var l=function(){},m=function(){d=d3.utilities.uniqueProperties(b,"category"),e=d3.utilities.uniqueProperties(b,"subcategory"),h.domain(d).rangeRoundBands([0,f.graphicHeight()],.2,0),g.domain(e).rangeRoundBands([0,f.graphicWidth()],.2,0),i.domain(d3.extent(b,function(a){return a.date})),j.domain(d3.extent(b,function(a){return a.value})),j.range([h.rangeBand(),0]),i.range([0,g.rangeBand()])},n=function(){t(),o()},o=function(){_.each(d,function(a){_.each(e,function(b){p(a,b)})})},p=function(a,b){"line"===c.chartType?r(a,b):alert("Chart type "+c.chartType+" not supported")},q=function(a){d3.select("#popup").remove();var b=15,c=32,d=f.graphicHeight()-2*b,e=f.graphicWidth()-2*b,g=e-2*c,h=d-2*c,k=d3.svg.line(),l=d3.time.scale(),m=d3.scale.linear(),n=(d3.extent(a,function(a){return a.value}),_.last(a)),o=d3.utilities.padDomain(h,j.domain()[1],20);l.domain(i.domain()).range([0,g]),m.domain([j.domain()[0]-o,j.domain()[1]+o]).range([h,0]),k.interpolate("cardinal").tension(.88).x(function(a){return l(a.date)}).y(function(a){return m(a.value)});var p=f.svg().append("g").attr("transform","translate("+(f.graphicMarginLeft()+b)+","+(f.graphicMarginTop()+b)+")").attr("class","zoom").attr("id","popup");p.append("rect").attr("x",0).attr("y",0).attr("rx",8).attr("height",d).attr("width",e).attr("fill","white").attr("stroke","lightgray").attr("stroke-width","1px");var q=12,r=p.append("g").attr("transform","translate("+(e-q-18)+","+(q+18)+")"),s=function(){p.remove()};r.append("circle").attr("fill","white").attr("stroke","#cccccc").attr("r","15").on("click",s),r.append("line").attr("fill","none").attr("stroke","#cccccc").attr("stroke-width",2).attr("x1",-5).attr("y1",-5).attr("x2",5).attr("y2",5).on("click",s),r.append("line").attr("fill","none").attr("stroke","#cccccc").attr("stroke-width",2).attr("x1",5).attr("y1",-5).attr("x2",-5).attr("y2",5).on("click",s);var t=p.append("g").attr("transform","translate("+b+","+(b+10)+")");t.append("text").attr("class","zoom-title").text(a[0].category+" - "+a[1].subcategory);var u=d3.svg.axis(),v=d3.svg.axis(),w=p.append("g").attr("transform","translate("+c+","+c+")");u.scale(l).orient("bottom").tickFormat(d3.utilities.customTimeFormat).outerTickSize([0]).ticks(10),v.scale(m).orient("right").ticks(4),w.append("g").attr("class","x axis number").attr("transform","translate(0,"+m(m.domain()[0])+")").call(u),v.tickSize(g);var x=w.append("svg:g").attr("class","y axis number").call(v);x.selectAll("g").classed("gridline",!0),x.selectAll("text").attr("x",-14).attr("dy",-4),w.append("svg:path").attr("class","line").style("stroke","steelblue").attr("stroke-width","2px").attr("d",k(a));var y=w.append("g").attr("class","large-label").attr("transform","translate("+l(n.date)+","+m(n.value)+")");y.append("circle").attr("class","circle").style("fill",function(){return n.color}).attr("stroke-width","2").attr("stroke","white").attr("r",18),y.append("text").attr("stroke","white").attr("fill","white").attr("text-anchor","middle").attr("dy",6).attr("class","current-value").text(n.value),w.append("line").attr("stroke",n.color).attr("x1",l.range()[0]).attr("y1",m(n.target)).attr("x2",l.range()[1]).attr("y2",m(n.target))},r=function(a,b){var c=s(a,b),d=_.last(c),e=f.graphic().append("g").attr("class","mini-chart").attr("transform","translate("+g(b)+","+h(a)+")");k.interpolate("cardinal").tension(.88).x(function(a){return i(a.date)}).y(function(a){return j(a.value)}),e.append("rect").attr("fill","#EDEDED").attr("height",h.rangeBand()).attr("width",g.rangeBand()).on("click",function(){q(c)}),e.append("svg:path").attr("class","line").style("stroke","steelblue").attr("d",k(c)),_.isEmpty(d)||e.append("circle").attr("class","circle").style("fill",function(){return d.color}).attr("cx",function(){return i(d.date)-1}).attr("cy",function(){return j(d.value)}).attr("r",3)},s=function(a,c){return _.select(b,function(b){return b.category===a&&b.subcategory===c})},t=function(){var a=f.svg().append("g").attr("class","top-nav").attr("transform","translate("+f.graphicMarginLeft()+","+f.marginTop()+")"),b=f.svg().append("g").attr("class","left-nav").attr("transform","translate("+f.marginLeft()+","+f.graphicMarginTop()+")");if(c.topLabels){var d=a.selectAll("g.top-nav .text").data(g.domain());d.enter().append("svg:foreignObject").attr("class","text").append("xhtml:div").attr("class","column-label ").attr("style","height:"+c.margin.topLabel+"px; width:"+g.rangeBand()+"px;").append("xhtml:div").html(function(a){return a}),d.attr("width",g.rangeBand()).attr("height",c.margin.topLabel).attr("x",function(a){return g(a)}).attr("y",0),d.exit().remove()}if(c.leftLabels){var e=b.selectAll("g.left-nav .text").data(h.domain());e.enter().append("svg:foreignObject").attr("class","text").append("xhtml:div").attr("class","row-label ").append("xhtml:div").html(function(a){return a}),e.attr("width",168).attr("height",h.rangeBand()).attr("x",0).attr("y",function(a){return h(a)}).attr("style","line-height:"+h.rangeBand()+"px"),e.exit().remove()}};return f},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),d3.charts.templateBuilder=function(a,b,c){"use strict";var d=d3.charts.baseBuilder(a,b,c);d3.charts.legend(),d3.scale.ordinal(),d3.scale.ordinal(),d.draw=function(){var a=_.isEmpty(b);d.setupSvg(),d.setupChart(),d.setupGraphic(),a&&e(),f(),g(),a&&d.drawNoDataLabel(),c.legend&&h(),c.svgArea&&d.svgArea(),c.titleOn&&d.drawTitle(),c.chartArea&&d.chartArea(),c.graphicArea&&d.graphicArea()};var e=function(){},f=function(){},g=function(){},h=function(){};return d},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),d3.charts.timeseriesBuilder=function(a,b,c){"use strict";var d,e,f=d3.charts.baseBuilder(a,b,c),g=d3.charts.legend(),h=d3.time.scale(),i=d3.time.scale(),j=d3.scale.linear(),k=d3.scale.linear(),l=d3.scale.ordinal(),m=d3.svg.brush(),n=d3.svg.axis(),o=d3.svg.axis(),p=d3.svg.axis(),q=d3.svg.line(),r=d3.svg.line(),s=8,t="clip-"+d3.utilities.s4();f.draw=function(){var a=_.isEmpty(b);return c.zoomOff&&v(),f.setupSvg(),f.setupChart(),f.setupGraphic(),u(),c.titleOn&&f.drawTitle(),a?(f.drawNoDataLabel(),void 0):(w(),x(),c.zoomOff||z(),c.legend&&B(),c.svgArea&&f.svgArea(),c.chartArea&&f.chartArea(),c.graphicArea&&f.graphicArea(),void 0)};var u=function(){f.svg().append("defs").append("clipPath").attr("id",t).append("rect").attr("width",f.graphicWidth()).attr("height",f.graphicHeight())},v=function(){c.bottomLabels=!1},w=function(){h.range([0,f.graphicWidth()]),j.range([f.graphicHeight(),0]),n.scale(h).orient("top").tickFormat(d3.utilities.customTimeFormat).outerTickSize([0]).ticks(8),p.scale(j).orient("right").ticks(10);var a=d3.min(b,function(a){return d3.min(a.data,function(a){return a.value})}),c=d3.max(b,function(a){return d3.max(a.data,function(a){return a.value})}),e=d3.utilities.padDomain(j.range()[0],c,30),m=d3.utilities.padDomain(j.range()[0],c,50);d=_.reduce(b,function(a,b){return a.push(b.series),a},[]);var o=a-m,s=c+e;l.domain(d).range(d3.utilities.colorWheel),g.color(l),h.domain(d3.extent(_.flatten(b,function(a){return a.data}),function(a){return a.date}));var t=new Date(h.domain()[1].getTime()+6e4);h.domain([h.domain()[0],t]),j.domain([o,s]),i.domain(h.domain()),k.domain([o,s]),q.interpolate("cardinal").tension(.7).x(function(a){return h(a.date)}).y(function(a){return j(a.value)}),r.interpolate("cardinal").tension(.7).x(function(a){return i(a.date)}).y(function(a){return k(a.value)})},x=function(){e=f.svg().append("g").attr("class","chart1").attr("transform","translate("+f.graphicMarginLeft()+","+f.graphicMarginTop()+")"),e.append("g").attr("class","x axis number").attr("transform","translate(0,"+j(j.domain()[0])+")").call(n),p.tickSize(f.graphicWidth());var a=e.append("svg:g").attr("class","y axis number").call(p);a.selectAll("g").classed("gridline",!0),a.selectAll("text").attr("x",4).attr("dy",-4);var d=e.append("g").attr("class","chart");d.selectAll("path").data(b).enter().append("path").attr("clip-path","url(#"+t+")").attr("class","line").style("stroke",function(a){return l(a.series)}).style("stroke-width","2px").attr("series",function(a){return a.series}).attr("d",function(a){return q(a.data)}),c.dataPoints&&d.selectAll("circle").data(_.flatten(b,"data")).enter().append("circle").attr("class","circle").attr("clip-path","url(#clip)").style("stroke",function(a){return a.color}).attr("cx",function(a){return h(a.date)}).attr("cy",function(a){return j(a.value)}).attr("r",dataRadius)},y=function(){h.domain(m.empty()?i.domain():m.extent()),e.selectAll("g.chart path").data(b).attr("d",function(a){return q(a.data)}),e.selectAll("circle").data(_.flatten(b,"data")).attr("cx",function(a){return h(a.date)}).attr("cy",function(a){return j(a.value)}),e.select(".x.axis").call(n)},z=function(){var a=f.bottomLabel()-13,c=f.svg().append("g").attr("class","chart2").attr("transform","translate("+(f.graphicMarginLeft()+s)+","+(f.graphicMarginTop()+f.graphicHeight())+")");k.range([a,0]),i.range([0,f.graphicWidth()-2*s]),o.scale(i).orient("bottom").tickFormat(d3.utilities.customTimeFormat).outerTickSize([0]).tickSize(2).tickPadding(0).ticks(12),m.x(i).on("brush",y),c.selectAll("path").data(b).enter().append("path").attr("class","minor line").style("stroke-width","1px").attr("d",function(a){return r(a.data)}),c.append("g").attr("class","x axis number").attr("transform","translate(0,"+a+")").call(o),i.domain()[0],new Date,m.extent([i.domain()[0],i.domain()[1]]);var d=c.append("g").attr("class","x brush").call(m);d.selectAll("rect").attr("height",a),d.selectAll(".resize").append("path").attr("d",function(b){return d3.utilities.resizeHandles(b,a)})},A=function(a){var b="g.chart1 [series='"+a+"']",c=e.select(b),d="2px"==c.style("stroke-width")?"10px":"2px";c.transition().style("stroke-width",d)},B=function(){g.click(A).y(f.legendMarginTop()).x(f.legendMarginLeft()),f.svg().datum(d).call(g)};return f},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),this.d3.charts.chartTitle=function(){"use strict";function a(a){a.each(function(){var f=a.append("g").attr("class","chart-title");f.attr("transform","translate("+b+","+c+")"),f.append("text").attr("x",0).attr("y",0).attr("dy",".35em").style("text-anchor","start").attr("class","header").text(d),f.append("text").attr("x",0).attr("y",15).attr("dy",".35em").style("text-anchor","start").text(e)})}var b=0,c=0,d="Lorem",e="Ipsum";return a.x=function(c){return arguments.length?(b=c,a):b},a.y=function(b){return arguments.length?(c=b,a):c},a.title=function(b){return arguments.length?(d=b,a):d},a.subTitle=function(b){return arguments.length?(e=b,a):e},a},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),this.d3.charts.baseChart=function(){"use strict";var a,b,c={},d=function(d){d.each(function(d){var e=b(this,d,c);e.draw(),a=e.svg()})};return d.config=function(a,b){return arguments.length?(void 0!==b&&(c[a]=b),d[a]=function(b){return arguments.length?(c[a]=b,d):c[a]},d):c},d.builder=function(a){return arguments.length?(b=a,d):b},d.config("width",900).config("height",500).config("title","TITLE GOES HERE").config("subtitle","Subtitle goes here").config("margin",{top:8,right:0,bottom:0,left:0,leftLabel:168,bottomLabel:40,topLabel:60,legend:168,title:30}).config("leftLabels",!0).config("bottomLabels",!0).config("topLabels",!1).config("chartArea",!1).config("graphicArea",!1).config("legend",!1).config("titleOn",!0),d.svg=function(){return a},d},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),this.d3.charts.heatmap=function(){"use strict";var a=d3.charts.baseChart().config("svgArea",!1).config("chartArea",!1).config("graphicArea",!1).config("legend",!1).config("leftLabels",!0).config("bottomLabels",!1).config("topLabels",!0).config("titleOn",!0).config("width",900).config("height",500).config("fixedColumnWidth",!1).config("fixedRowHeight",!1).config("cellFont","small").config("rowFont","small").config("columnFont","small").config("cellFontColor","white").config("className","heatmap").config("legendData",!1).builder(d3.charts.heatmapBuilder);return a},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),this.d3.charts.stacked=function(){"use strict";var a=d3.charts.baseChart().config("chartArea",!1).config("graphicArea",!1).config("legend",!0).config("leftLabels",!0).config("bottomLabels",!0).config("titleOn",!0).config("vertical",!1).config("className","stacked").builder(d3.charts.stackedBuilder);return a},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),this.d3.charts.tablechart=function(){"use strict";var a=d3.charts.baseChart().config("svgArea",!1).config("chartArea",!1).config("graphicArea",!1).config("legend",!1).config("leftLabels",!0).config("bottomLabels",!1).config("topLabels",!0).config("titleOn",!0).config("chartType","line").config("className","tablechart").config("width",900).config("height",500).builder(d3.charts.tablechartBuilder);return a},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),this.d3.charts.template=function(){"use strict";var a=d3.charts.baseChart().config("svgArea",!0).config("chartArea",!0).config("graphicArea",!0).config("legend",!0).config("leftLabels",!0).config("bottomLabels",!0).config("topLabels",!0).config("titleOn",!0).config("className","template").config("width",900).config("height",500).builder(d3.charts.templateBuilder);return a},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),this.d3.charts.timeseries=function(){"use strict";var a=d3.charts.baseChart().config("svgArea",!1).config("chartArea",!1).config("graphicArea",!1).config("legend",!0).config("leftLabels",!1).config("bottomLabels",!0).config("topLabels",!1).config("titleOn",!0).config("className","timeseries").config("width",900).config("height",500).config("dataPoints",!1).config("zoomOff",!1).builder(d3.charts.timeseriesBuilder);return a},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),this.d3.charts.filter=function(){"use strict";function a(a){a.each(function(a){a.unshift("Select"),d=d3.select(this).append("div");var b=d.append("select"),c=b.selectAll("option").data(a);c.enter().append("option").attr("value",function(a){return a}).attr("subcategory",function(a){return a}).text(function(a){return a})})}var b=960,c=500,d={};return a.width=function(c){return arguments.length?(b=c,a):b},a.height=function(b){return arguments.length?(c=b,a):c},a.svg=function(){return d},a},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),this.d3.charts.legend=function(){"use strict";function a(a){a.each(function(f){var g=a.append("g").attr("class","legend-container").attr("transform","translate("+b+","+c+")"),h=g.selectAll(".legend").data(f).enter().append("g").attr("class","legend");h.append("rect").attr("x",0).attr("y",function(a,b){return 28*b}).attr("width",17).attr("height",17).attr("fill",function(a){return d(a)}),h.append("text").attr("x",25).attr("y",function(a,b){return 28*b+9}).attr("dy",".35em").style("text-anchor","start").text(function(a){return a}),e&&g.selectAll("g").attr("style","cursor: pointer;").on("click",e)})}var b=0,c=0,d=d3.scale.category10(),e=void 0;return a.x=function(c){return arguments.length?(b=c,a):b},a.y=function(b){return arguments.length?(c=b,a):c},a.color=function(b){return arguments.length?(d=b,a):d},a.click=function(b){return arguments.length?(e=b,a):e},a},(null===d3.charts||"object"!=typeof d3.charts)&&(d3.charts={}),this.d3.charts.noData=function(){"use strict";function a(a){a.each(function(){var d=a.append("g").attr("class","no-data-found").attr("transform","translate("+b+","+c+")");d.append("rect").attr("x",0).attr("y",0).attr("height","100px").attr("width","300px"),d.append("text").attr("x",150).attr("y",55).text("NO DATA FOUND")})}var b=0,c=0;return a.x=function(c){return arguments.length?(b=c,a):b},a.y=function(b){return arguments.length?(c=b,a):c},a},(null===d3.utilities||"object"!=typeof d3.utilities)&&(d3.utilities={}),this.d3.helpers={timeFormat:function(a){return function(b){for(var c=a.length-1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}},this.d3.utilities={uniqueProperties:function(a,b){return _.reduce(a,function(a,c){return a.filter(function(a){return c[b]===a}).length||a.push(c[b]),a},[])},colorWheel:["#F3504F","#F28A00","#F1C40E","#57D68D","#15A085","#00237E","#3398DB","#74DDE8","#9B59B6","#661C79"],stackColors:["#00237E","#3398DB","#85C1E9","#C7DFF1","#00227D"],customTimeFormat:d3.helpers.timeFormat([[d3.time.format("%Y"),function(){return!0}],[d3.time.format("%b"),function(a){return a.getMonth()}],[d3.time.format("%b %d"),function(a){return 1!=a.getDate()}],[d3.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[d3.time.format("%I %p"),function(a){return a.getHours()}],[d3.time.format("%I:%M"),function(a){return a.getMinutes()}],[d3.time.format(":%S"),function(a){return a.getSeconds()}],[d3.time.format(".%L"),function(a){return a.getMilliseconds()}]]),padDomain:function(a,b,c){return c/a*b},linewrap:function(a){var b=a.value,c=d3.select(this);if(b){var d=b.split("<br>");_.each(d,function(a,b){var d=c.append("tspan").text(a).attr("text-anchor","middle");b>0&&d.attr("dx",0).attr("dy","15")})}},has:function(a,b){return"object"==typeof a?Object.prototype.hasOwnProperty.call(a,b):void 0},dictionary:function(a,b,c){return this.has(c,b)?a[c[b]]:a[b]},commonProperties:["xAxis","yAxis","category","subcategory","value","trend","color","target"],transform:function(a,b){var c=this;return _.reduce(c.commonProperties,function(d,e){var f=c.dictionary(a,e,b);return f&&(d[e]=c.dictionary(a,e,b)),d},{})},transformSet:function(a,b){var c=this;return _.map(a,function(a){return c.transform(a,b)})},resizeHandles:function(a,b){var c=+("e"==a),d=c?1:-1,e=b/3;return"M"+.5*d+","+e+"A6,6 0 0 "+c+" "+6.5*d+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+c+" "+.5*d+","+2*e+"Z"+"M"+2.5*d+","+(e+6)+"V"+(2*e-6)+"M"+4.5*d+","+(e+6)+"V"+(2*e-6)},s4:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},comma:d3.format(",")};